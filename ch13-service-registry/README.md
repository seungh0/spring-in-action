# 13. 서비스 탐구하기

## 마이크로서비스

### 단일 애플리케이션의 문제점

- 전체를 파악하기 얿다
- 테스트가 어렵다
- 라이브러리 간에 충돌이 생기기 쉽다
- 확장 시에 비효율적이다.
- 적용할 테크놀러지를 결정할 떄도 애플리케이션 전체를 고려해야 한다.
- 프로덕션으로 이양하기 위해 많은 노력이 필요하다.

### 마이크로서비스

마이크로서비스 아키텍처는 개별적으로 개발되고 배포되는 소규모의 작은 애플리케이션들로 애플리케이션을 만드는 방법이다. 마이크로서비스는 상호 협력하여 더 큰 애플리케이션의 기능을 제공한다.

- 마이크로서비스는 쉽게 이해할 수 있다.
    - 다른 마이크로서비스와 협력할 때 각 마이크로서비스는 작으면서 한정된 처리를 수행한다.
    - 따라서 마이크로서비스는 자신의 목적에만 집중하므로 더 이해하기 쉽다.
- 마이크로서비스는 테스트가 쉽다.
- 마이크로서비스는 라이브러 비호환성 문제가 생기지 않는다.
    - 각 마이크로서비스는 다른 마이크로서비스와 공유되지 않는 빌드 의존성을 가지므로 라이브러리 충돌 문제가 생기지 않음.
- 마이크로서비스는 독자적으로 규모를 조정할 수 있다.
    - 만일 특정 마이크로서비스 규모가 더 커야 한다면, 애플리케이션의 다른 마이크로서비스에 영향을 주지 않고, 메모리 할다이나 인스턴스의 수를 더 크게 조정할 수 있다.
- 각 마이크로서비스에 적용할 테크놀러지를 다르게 선택할 수 있다.
    - 각 마이크로서비스에 사용할 프로그래밍 언어, 플랫폼, 프레임워크를 서로 다르게 선택할 수 있다.
- 마이크로서비스는 언제든 프로덕션으로 이양할 수 있다.
    - 각 마이크로서비스를 따로 배포할 수 있다.

### 마이크로서비스

- 마이크로서비스 아키텍처는 분산 아키텍처이므로 네트워크 지연과 같은 문제들이 발생할 수 있다.
- 마이크로서비스로의 원격 호출이 많이 추가될수록 애플리케이션의 실행은 더 느려질 수 있다.
- 애플리케이션으로 상대적으로 작거나 간단하다면 일단 단일 애플리케이션으로 개발하는 것이 좋다.
- 그리고 점차 규모가 커질때 마이크로서비스 아키텍처로 변경하는 것을 고려할 수 있다.

## 서비스 레지스트리 설정하기

### 유레카

- 마이크로서비스가 서로를 찾을 때 사용되는 서비스 레지스트리.
- 유레카는 마이크로서비스 애플리케이션에 있는 모든 서비스의 중앙 집중 레지스트리로 작동.
- 유레카 자체도 마이크로서비스로 생각할 수 있으며, 더 큰 애플리케이션에서 서로 다른 서비스들이 서로를 찾는 데 도움을 주는 것이 목적.
- 서비스 인스턴스가 시작될 때 해당 서비스는 자신의 이름을 유레카에 등록한다.
- 다음으로 등록된 여러 인스턴스 중 어떤 인스턴스를 사용할지, 클라이언트 측에서 동작하는 로드밸런싱 알고리즘이 적용한다.
- 이때 사용될 수 있는 것이 Ribbon.

### 클라이언트 측의 로드 밸런서를 사용하는 이유

- 로드 밸런스는 주로 단일의 중앙 집중화된 서비스가 서버 측에서 사용되었다.
- 하지만 이와는 반대로 리본은 클라이언트에서 실행되는 클라이언트 측의 로드 밸런서이다.

### 클라이언트 측의 로드 밸런서의 장점

- 각 클라이언언트에 하나의 로컬 로드 밸런서가 있으므로, 클라이언트의 수에 비례하여 자연스럽게 로드 밸런서의 크기가 조정된다.
- 또한, 서버에 연결된 모든 서비스에 획일적으로 같은 구성을 사용하는 대신, 로드 밸런서는 각 클라이언트에 가장 적합한 로드 밸런싱 알고리즘을 사용하도록 구성할 수 있음.
